-- FLY V4 - SQUARE PREMIUM UI
local Player = game.Players.LocalPlayer
local Mouse = Player:GetMouse()
local Character = Player.Character or Player.CharacterAdded:Wait()

local flying = false
local speed = 50

-- GUI
local ScreenGui = Instance.new("ScreenGui", Player.PlayerGui)
ScreenGui.Name = "FlyV4_Premium"

local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Size = UDim2.new(0, 260, 0, 260)
MainFrame.Position = UDim2.new(0.5, -130, 0.5, -130)
MainFrame.BackgroundColor3 = Color3.fromRGB(18,18,22)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true

Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0,12)

local Stroke = Instance.new("UIStroke", MainFrame)
Stroke.Thickness = 2
Stroke.Transparency = 0.2

local Gradient = Instance.new("UIGradient", Stroke)
Gradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(255,0,255)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(0,255,255)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(255,0,255))
}

task.spawn(function()
    while task.wait(0.02) do
        Gradient.Rotation += 2
    end
end)

-- TITLE
local Title = Instance.new("TextLabel", MainFrame)
Title.Text = "FLY PANEL"
Title.Size = UDim2.new(1,0,0,50)
Title.BackgroundTransparency = 1
Title.TextColor3 = Color3.new(1,1,1)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 26

-- SPEED BOX
local SpeedBox = Instance.new("Frame", MainFrame)
SpeedBox.Size = UDim2.new(0.7,0,0,60)
SpeedBox.Position = UDim2.new(0.15,0,0.25,0)
SpeedBox.BackgroundColor3 = Color3.fromRGB(30,30,35)
Instance.new("UICorner", SpeedBox).CornerRadius = UDim.new(0,10)

local SpeedLabel = Instance.new("TextLabel", SpeedBox)
SpeedLabel.Size = UDim2.new(1,0,1,0)
SpeedLabel.BackgroundTransparency = 1
SpeedLabel.TextColor3 = Color3.fromRGB(0,255,150)
SpeedLabel.Font = Enum.Font.GothamBold
SpeedLabel.TextSize = 22
SpeedLabel.Text = "SPEED : "..speed

-- BUTTON CREATOR
local function createBtn(txt,pos,color)
    local b = Instance.new("TextButton", MainFrame)
    b.Text = txt
    b.Size = UDim2.new(0,55,0,55)
    b.Position = pos
    b.BackgroundColor3 = Color3.fromRGB(35,35,40)
    b.TextColor3 = color
    b.Font = Enum.Font.GothamBold
    b.TextSize = 26
    Instance.new("UICorner", b).CornerRadius = UDim.new(0,10)

    b.MouseEnter:Connect(function()
        b.BackgroundColor3 = Color3.fromRGB(55,55,65)
    end)
    b.MouseLeave:Connect(function()
        b.BackgroundColor3 = Color3.fromRGB(35,35,40)
    end)

    return b
end

local Minus = createBtn("-",UDim2.new(0.15,0,0.55,0),Color3.fromRGB(255,80,80))
local Plus = createBtn("+",UDim2.new(0.6,0,0.55,0),Color3.fromRGB(80,255,80))

-- TOGGLE BUTTON
local Toggle = Instance.new("TextButton", MainFrame)
Toggle.Size = UDim2.new(0.7,0,0,40)
Toggle.Position = UDim2.new(0.15,0,0.82,0)
Toggle.BackgroundColor3 = Color3.fromRGB(40,120,255)
Toggle.TextColor3 = Color3.new(1,1,1)
Toggle.Font = Enum.Font.GothamBold
Toggle.TextSize = 18
Toggle.Text = "FLY : OFF"
Instance.new("UICorner", Toggle).CornerRadius = UDim.new(0,8)

-- SPEED CONTROL
Plus.MouseButton1Click:Connect(function()
    speed += 25
    SpeedLabel.Text = "SPEED : "..speed
end)

Minus.MouseButton1Click:Connect(function()
    if speed > 25 then
        speed -= 25
        SpeedLabel.Text = "SPEED : "..speed
    end
end)

-- FLY SYSTEM
Toggle.MouseButton1Click:Connect(function()
    flying = not flying

    if flying then
        Toggle.Text = "FLY : ON"
        Toggle.BackgroundColor3 = Color3.fromRGB(0,180,120)

        local bv = Instance.new("BodyVelocity")
        bv.Name = "FlyVel"
        bv.MaxForce = Vector3.new(math.huge,math.huge,math.huge)
        bv.Parent = Character:WaitForChild("HumanoidRootPart")

        task.spawn(function()
            while flying do
                bv.Velocity = Mouse.Hit.LookVector * speed
                task.wait()
            end
            bv:Destroy()
        end)

    else
        Toggle.Text = "FLY : OFF"
        Toggle.BackgroundColor3 = Color3.fromRGB(40,120,255)
    end
end)
